!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t){e.exports=React},function(e,t){e.exports=ReactDOM},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return OpenStadComponentNLMap});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),react_dom__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__),openstad_component_src_index_jsx__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),_lib_amaps_cluster_icon_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var OpenStadComponentNLMap=function(_OpenStadComponent){function OpenStadComponentNLMap(e){var t;_classCallCheck(this,OpenStadComponentNLMap);var n=_assertThisInitialized(t=_possibleConstructorReturn(this,_getPrototypeOf(OpenStadComponentNLMap).call(this,e))),r={target:n.divId,style:"standaard",marker:!1,search:!1,center:{latitude:52.37104644463586,longitude:4.900402911007405},zoom:14,zoomposition:"bottomleft",disableDefaultUI:!0,polygon:null,autoZoomAndCenter:!1};switch(n.config=Object.assign(r,n.config||{}),n._loadedFiles=0,n.files=[{type:"css",href:"https://unpkg.com/leaflet@1.0.3/dist/leaflet.css"},{type:"script",src:"https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"}],n.config.variant){case"amaps":n.files.push({type:"script",src:"https://map.data.amsterdam.nl/dist/amaps.iife.js"});break;default:n.files.push({type:"css",href:"https://nlmaps.nl/dist/assets/css/nlmaps.css"}),n.files.push({type:"script",src:"https://nlmaps.nl/dist/nlmaps.iife.js"})}return n.files.push({type:"css",href:"https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css"}),n.files.push({type:"script",src:"https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"}),n.markers=n.config.markers||[],t}return _inherits(OpenStadComponentNLMap,_OpenStadComponent),_createClass(OpenStadComponentNLMap,[{key:"componentDidMount",value:function(e,t){var n=this;n.loadNextFile(function(){n.createMap();var e=new Event("mapIsReady");n.mapIsReady=!0,n.instance.dispatchEvent(e)})}},{key:"loadNextFile",value:function(e){var t,n=this,r=n.files[n._loadedFiles];r&&("script"===r.type&&((t=document.createElement("script")).src=r.src,t.async=!0),"css"===r.type&&((t=document.createElement("link")).href=r.href,t.rel="stylesheet"),t&&(t.onload=function(){n.loadNextFile(e)},this.instance.appendChild(t)));n._loadedFiles==n.files.length&&e(),n._loadedFiles++}},{key:"createMap",value:function createMap(){var self=this;switch(self.config.variant){case"amaps":self.map=amaps.createMap(self.config);break;default:self.map=nlmaps.createMap(self.config)}if(self.config.clustering&&self.config.clustering.isActive&&L.markerClusterGroup){var iconCreateFunction=self.config.clustering.iconCreateFunction||("amaps"==self.config.variant?_lib_amaps_cluster_icon_js__WEBPACK_IMPORTED_MODULE_3__.a.bind(self):self.createClusterIcon);iconCreateFunction&&"string"==typeof iconCreateFunction&&(iconCreateFunction=eval(iconCreateFunction)),self.markerClusterGroup=L.markerClusterGroup({iconCreateFunction:iconCreateFunction,showCoverageOnHover:self.config.clustering.showCoverageOnHover,maxClusterRadius:self.config.clustering.maxClusterRadius||80});var onClusterClick=self.config.clustering.onClusterClick||self.onClusterClick;"string"==typeof onClusterClick&&(onClusterClick=eval(onClusterClick)),self.markerClusterGroup.on("clusterclick",onClusterClick);var onClusterAnimationEnd=self.config.clustering.onClusterAnimationEnd||self.onClusterAnimationEnd;"string"==typeof onClusterAnimationEnd&&(onClusterAnimationEnd=eval(onClusterAnimationEnd)),self.markerClusterGroup.on("animationend",onClusterAnimationEnd),self.map.addLayer(self.markerClusterGroup)}if(self.config.onMapClick&&"string"==typeof self.config.onMapClick&&(self.config.onMapClick=eval(self.config.onMapClick)),self.map.on("click",self.config.onMapClick||self.onMapClick),self.config.polygon&&self.createCutoutPolygon(self.config.polygon),self.markers.length&&self.markers.forEach(function(e){self.addMarker(e)}),self.config.autoZoomAndCenter){var centerOn="polygon"==self.config.autoZoomAndCenter&&self.config.polygon||self.markers&&self.markers.length&&self.markers;self.editorMarker&&(centerOn=self.editorMarker.position?[self.editorMarker]:self.config.polygon),centerOn&&self.setBoundsAndCenter(centerOn)}}},{key:"addMarkers",value:function(e){var t=this;e.forEach(function(e){t.addMarker(e)})}},{key:"addMarker",value:function addMarker(markerData){var self=this,icon=markerData.icon,marker;if(!icon){var iconCreateFunction=self.config.iconCreateFunction;iconCreateFunction&&"string"==typeof iconCreateFunction&&(iconCreateFunction=eval(iconCreateFunction),icon=iconCreateFunction())}marker=icon?L.marker([markerData.lat,markerData.lng],{icon:icon}):L.marker([markerData.lat,markerData.lng]),marker.visible=!0,marker.data=markerData.data,marker.doNotCluster=markerData.doNotCluster,markerData.href&&(markerData.onClick=function(){document.location.href=markerData.href});var onClick=null!=markerData.onClick&&markerData.onClick||self.config.onMarkerClick||self.onMarkerClick;return onClick&&("string"==typeof onClick&&(onClick=eval(onClick)),marker.on("click",onClick)),self.markerClusterGroup&&!markerData.doNotCluster?self.markerClusterGroup.addLayer(marker):self.map.addLayer(marker),self.markers.push(marker),marker}},{key:"removeMarker",value:function(e){if(e){var t=this.markers.indexOf(e);t>-1&&(this.markers.splice(t,1),this.map.removeLayer(e),this.markerClusterGroup.removeLayer(e))}}},{key:"updateMarker",value:function(e,t){if(t.location){var n=new L.LatLng(t.location.lat,t.location.lng);e.setLatLng(n)}}},{key:"createClusterIcon",value:function(e){var t=e.getChildCount();return L.divIcon({html:t,className:"osc-nlmap-icon-cluster",iconSize:L.point(20,20),iconAnchor:[20,10]})}},{key:"createCutoutPolygon",value:function(e){console.log(e.length);var t=L.polygon(e).getBounds().getCenter(),n=0,r=0;e.forEach(function(e,o){var a=Math.sin(e.lng-t.lng)*Math.cos(e.lat),i=Math.cos(t.lat)*Math.sin(e.lat)-Math.sin(t.lat)*Math.cos(e.lat)*Math.cos(e.lng-t.lng),l=180*Math.atan2(a,i)/Math.PI;45-l<n&&(n=45-l,r=o)});var o=e.slice(0,r),a=e.slice(r,e.length);e=a.concat(o);var i=[{lat:-85,lng:-179.99},{lat:-85,lng:0},{lat:-85,lng:179.99},{lat:0,lng:179.99},{lat:85,lng:179.99},{lat:85,lng:0},{lat:85,lng:-179.99},{lat:85,lng:-179.99},{lat:0,lng:-179.99}],l=Object.assign({color:"#d00",fillColor:"#000",fillOpacity:.15},this.config.polygonStyle),c=L.polygon([i,e],l);return this.map.addLayer(c),c}},{key:"removePolygon",value:function(e){e&&this.map.removeLayer(e)}},{key:"setBoundsAndCenter",value:function(e){var t=[];if((e=e||[]).forEach(function(e){e._latlng?e=e._latlng:e.position&&(e=e.position.coordinates?{lat:e.position.coordinates[0],lng:e.position.coordinates[1]}:e.position),t.push(e)}),1==t.length)this.map.panTo(new L.LatLng(t[0].lat,t[0].lng));else{var n=L.latLngBounds(t);this.map.fitBounds(n)}}},{key:"showMarkers",value:function(e){var t=this;e.forEach(function(e){t.showMarker(e)})}},{key:"showMarker",value:function(e){e.visible=!0,this.markerClusterGroup&&!e.doNotCluster?this.markerClusterGroup.addLayer(e):e.addTo(this.map)}},{key:"hideMarkers",value:function(e){var t=this;e.forEach(function(e){t.hideMarker(e)})}},{key:"hideMarker",value:function(e){e.visible=!1,this.markerClusterGroup&&!e.doNotCluster?this.markerClusterGroup.removeLayer(e):e.remove(this.map)}},{key:"setFilter",value:function(e){this.filterFunction=e,this.applyFilter()}},{key:"applyFilter",value:function(){var e=this;e.filterFunction?e.markers.forEach(function(t){e.filterFunction(t)?e.showMarker(t):e.hideMarker(t)}):e.markers.forEach(function(t){e.showMarker(t)})}},{key:"isPointInPolygon",value:function(e,t){var n,r=t.length-1,o=!1,a=e.lat,i=e.lng;for(n=0;n<t.length;n++)(t[n].lng<i&&t[r].lng>=i||t[r].lng<i&&t[n].lng>=i)&&t[n].lat+(i-t[n].lng)/(t[r].lng-t[n].lng)*(t[r].lat-t[n].lat)<a&&(o=!o),r=n;return o}},{key:"getPointInfo",value:function(e,t,n){var r="https://api.data.amsterdam.nl/bag/nummeraanduiding/?format=json&locatie=[[lat]],[[lng]],50".replace(/\[\[lat\]\]/,(e=e||{}).lat).replace(/\[\[lng\]\]/,e.lng);fetch(r).then(function(e){return e.json()}).then(function(r){var o=r&&r.results&&r.results[0]&&r.results[0].landelijk_id,a="https://api.data.amsterdam.nl/bag/nummeraanduiding/[[id]]/?format=json".replace(/\[\[id\]\]/,o);fetch(a).then(function(e){return e.json()}).then(function(r){r.lat=e.lat,r.lng=e.lng,n&&n(r,t)})}).catch(function(e){console.log("Zoek adres: niet goed"),console.log(e),n&&n({},t)})}},{key:"onMapClick",value:function(){}},{key:"onMarkerClick",value:function(){}},{key:"onClusterClick",value:function(){}},{key:"onClusterAnimationEnd",value:function(){}},{key:"render",value:function(){var e=this;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{id:this.divId,className:this.props.className||"osc-nlmap",ref:function(t){return e.instance=t}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{id:this.divId+"-map"}))}}]),OpenStadComponentNLMap}(openstad_component_src_index_jsx__WEBPACK_IMPORTED_MODULE_2__.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(0),o=n.n(r);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?c(e):t}(this,l(t).call(this,e));var r=c(n);if(e.attributes&&Object.keys(e.attributes).forEach(function(t){var n=e.attributes[t];r[n.name]=n.value}),r.config=r.config||e.config,r.config)try{r.config=JSON.parse(r.config)}catch(e){}return r.divId=r.divId||r.config&&r.config.divId||e.id||"openstad-component-".concat(parseInt(1e8*Math.random())),window[r.divId]=c(n),n}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentDidMount",value:function(e,t){}}])&&i(n.prototype,r),u&&i(n,u),t}()},function(module,__webpack_exports__,__webpack_require__){"use strict";function amapsCreateClusterIcon(cluster){var self=this,count=cluster.getChildCount();if(self.config.typeField&&self.config.types&&self.config.types.length){var _count=cluster.getChildCount(),markers=cluster.getAllChildMarkers(),colors={},total=markers.length,isFaded=!1;markers.forEach(function(entry){var type=entry.data&&eval("entry.data.".concat(self.config.typeField)),tmp=self.config.types.find(function(e){return e.name==type}),color=tmp&&tmp.color||"black";null==type&&(type="undef"),colors[color]||(colors[color]=0),colors[color]++,entry.data&&entry.data.isFaded&&(isFaded=!0)});var html='<svg viewBox="0 0 36 36"><circle cx="18" cy="18" r="14" fill="white"/>',soFar=0;return Object.keys(colors).forEach(function(e){var t=e,n=100*colors[e]/total;html+='  <path\n             d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"\n             fill="none"\n             transform="rotate('.concat(soFar/100*360,', 18, 18)"\n             stroke="').concat(t,'"\n             stroke-width="4"\n             stroke-dasharray="').concat(n,', 100"\n             />'),soFar+=n}),html+='<text x="18" y="21" text-anchor="middle" class="openstad-component-ideas-on-map-icon openstad-component-ideas-on-map-icon-text">'+_count+"</text></svg>",L.divIcon({html:html,className:"openstad-component-ideas-on-map-icon-cluster",iconSize:L.point(36,36),iconAnchor:[18,18],isFaded:isFaded})}return L.divIcon({html:count,className:"openstad-component-ideas-on-map-icon-cluster",iconSize:L.point(20,20),iconAnchor:[20,10]})}__webpack_require__.d(__webpack_exports__,"a",function(){return amapsCreateClusterIcon})},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(1),i=n.n(a),l=(n(6),n(2));n.d(t,"OpenStadComponentNLMap",function(){return l.a}),window.addEventListener("load",function(){document.querySelectorAll(".openstad-component-nlmap").forEach(function(e){var t=e.attributes;i.a.render(o.a.createElement(l.a,{attributes:t}),e)})})},function(e,t,n){}]);
//# sourceMappingURL=index.js.map